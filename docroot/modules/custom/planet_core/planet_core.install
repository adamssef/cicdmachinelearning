<?php

/**
 * @file
 * Contains install and update functions for Planet Core.
 */

use Drupal\taxonomy\Entity\Term;

/**
 * Implements hook_update_N().
 *
 * Create mandatory sectors for the 'Company Sectors' vocabulary.
 *
 * @throws \Drupal\Core\Entity\EntityStorageException
 */
function planet_core_update_8001(): void {
  $vid = 'company_sectors';
  $company_sectors = [
    'Payments',
    'Hospitality',
    'Partners',
    'Retail',
  ];

  foreach ($company_sectors as $sector) {
    $term = Term::create([
      'parent' => [],
      'name' => $sector,
      'vid' => $vid,
    ]);

    $term->save();
  }
}
